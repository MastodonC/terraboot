[Unit]
Description=Signal CloudFormation Success
After=dcos.target
Requires=dcos.target
ConditionPathExists=!/var/lib/dcos-cfn-signal
[Service]
Type=simple
Restart=on-failure
StartLimitInterval=0
RestartSec=15s
EnvironmentFile=/opt/mesosphere/environment
EnvironmentFile=/opt/mesosphere/etc/cloudenv
Environment="AWS_CFN_SIGNAL_THIS_RESOURCE=${server-group}"
ExecStartPre=/bin/ping -c1 leader.mesos
ExecStartPre=/opt/mesosphere/bin/cfn-signal
ExecStart=/usr/bin/touch /var/lib/dcos-cfn-signal
